/*!
 * Lightweight self-hosted loader for @walletconnect/modal UMD.
 * Loads the official UMD + CSS from CDNs with graceful fallback.
 */
(function () {
  var cssList = [
    "https://cdn.jsdelivr.net/npm/@walletconnect/modal@2.6.2/dist/style.css",
    "https://unpkg.com/@walletconnect/modal@2.6.2/dist/style.css"
  ];
  var jsList = [
    "https://cdn.jsdelivr.net/npm/@walletconnect/modal@2.6.2/dist/index.umd.min.js",
    "https://unpkg.com/@walletconnect/modal@2.6.2/dist/index.umd.min.js"
  ];

  function loadCss(href, cb) {
    var l = document.createElement("link");
    l.rel = "stylesheet"; l.href = href; l.crossOrigin = "anonymous";
    l.onload = function(){ cb && cb(); };
    l.onerror = function(){ cb && cb(new Error("css load failed: " + href)); };
    document.head.appendChild(l);
  }

  function loadScript(src, cb) {
    var s = document.createElement("script");
    s.src = src; s.async = true; s.crossOrigin = "anonymous";
    s.onload = function(){ cb && cb(); };
    s.onerror = function(){ cb && cb(new Error("js load failed: " + src)); };
    document.head.appendChild(s);
  }

  cssList.forEach(function(href){ loadCss(href); });

  var i = 0;
  (function next(err){
    if (i >= jsList.length) {
      console.error("[WC Loader] Failed to load WalletConnect Modal UMD.", err);
      var ev = new CustomEvent("walletconnect:modal:error", { detail: { error: String(err) }});
      window.dispatchEvent(ev);
      return;
    }
    loadScript(jsList[i++], next);
  })();
})();